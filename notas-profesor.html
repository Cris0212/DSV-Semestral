<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Notas - EduTechPlus</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="ScriptsProfesor/notasProfesor.js" defer></script>
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-800 min-h-screen text-white">

    <div class="min-h-screen flex flex-col">

        <!-- Encabezado -->
        <header class="px-8 py-4 border-b border-gray-700 flex justify-between items-center">
            <div>
                <h1 class="text-xl font-bold">EduTechPlus · Notas</h1>
                <p class="text-xs text-gray-400">Registro y consulta de notas por trimestre</p>
            </div>
            <div class="flex gap-3">
                <button class="text-sm text-blue-300 hover:text-blue-200"
                        onclick="window.location.href='panel-profesor.html'">
                    ← Volver al Panel
                </button>
                <button class="text-sm text-red-400 hover:text-red-300"
                        id="btn-cerrar-sesion">
                    Cerrar sesión
                </button>
            </div>
        </header>

        <!-- Contenido principal -->
        <main class="flex-1 p-6 flex flex-col gap-6 max-w-6xl mx-auto w-full">

            <!-- Info profesor -->
            <section class="bg-white/10 border border-white/10 rounded-2xl p-4 flex justify-between items-center">
                <div>
                    <h2 class="text-lg font-semibold">
                        Profesor: <span id="prof-nombre">-</span>
                    </h2>
                    <p class="text-xs text-gray-300" id="prof-detalle">
                        Cargando datos del profesor...
                    </p>
                </div>
                <div class="text-xs text-gray-400">
                    <p id="prof-colegio">Colegio: -</p>
                    <p id="prof-turno">Turno: -</p>
                </div>
            </section>

            <!-- Registro de nota -->
            <section class="grid md:grid-cols-2 gap-6">
                <div class="bg-white/10 border border-white/10 rounded-2xl p-5">
                    <h3 class="text-lg font-semibold mb-3">Registrar nueva nota</h3>
                    <p class="text-xs text-gray-300 mb-4">
                        Completa los campos para registrar una nota de un estudiante.
                    </p>

                    <div class="space-y-3 text-sm">
                        <div>
                            <label class="block mb-1">ID Alumno</label>
                            <input id="alumnoId" type="number" min="1"
                                   class="w-full px-3 py-2 rounded-lg bg-gray-800 border border-gray-600 focus:border-green-400 focus:outline-none">
                        </div>

                        <div>
                            <label class="block mb-1">ID Materia</label>
                            <input id="materiaId" type="number" min="1"
                                   class="w-full px-3 py-2 rounded-lg bg-gray-800 border border-gray-600 focus:border-green-400 focus:outline-none">
                        </div>

                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="block mb-1">Trimestre</label>
                                <select id="trimestre"
                                        class="w-full px-3 py-2 rounded-lg bg-gray-800 border border-gray-600">
                                    <option value="1">1er Trimestre</option>
                                    <option value="2">2do Trimestre</option>
                                    <option value="3">3er Trimestre</option>
                                </select>
                            </div>
                            <div>
                                <label class="block mb-1">Tipo de nota</label>
                                <select id="tipo"
                                        class="w-full px-3 py-2 rounded-lg bg-gray-800 border border-gray-600">
                                    <option value="Diaria">Diaria</option>
                                    <option value="Apreciacion">Apreciación</option>
                                    <option value="Examen">Examen final</option>
                                </select>
                            </div>
                        </div>

                        <div>
                            <label class="block mb-1">Valor de la nota</label>
                            <input id="valor" type="number" min="0" max="100" step="0.01"
                                   class="w-full px-3 py-2 rounded-lg bg-gray-800 border border-gray-600 focus:border-green-400 focus:outline-none">
                            <p class="text-[11px] text-gray-400 mt-1">
                                Puedes usar escala de 0 a 100 o la que hayan definido.
                            </p>
                        </div>

                        <div class="pt-2 flex justify-end gap-3">
                            <button class="px-4 py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-xs"
                                    onclick="limpiarFormularioNota()">
                                Limpiar
                            </button>
                            <button class="px-4 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-xs font-semibold"
                                    onclick="guardarNota()">
                                Guardar nota
                            </button>
                        </div>

                        <p id="msg-registro" class="text-xs mt-2 text-gray-300"></p>
                    </div>
                </div>

                <!-- Consulta de notas por alumno -->
                <div class="bg-white/10 border border-white/10 rounded-2xl p-5">
                    <h3 class="text-lg font-semibold mb-3">Consultar notas por alumno</h3>
                    <p class="text-xs text-gray-300 mb-4">
                        Ingresa el ID del alumno para ver todas sus notas registradas.
                    </p>

                    <div class="flex gap-3 mb-3">
                        <input id="alumnoIdConsulta" type="number" min="1"
                               placeholder="ID Alumno"
                               class="flex-1 px-3 py-2 rounded-lg bg-gray-800 border border-gray-600 focus:border-blue-400 focus:outline-none text-sm">
                        <button class="px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 text-xs font-semibold"
                                onclick="consultarNotasAlumno()">
                            Consultar
                        </button>
                    </div>

                    <p id="msg-consulta" class="text-xs mb-2 text-gray-300"></p>

                    <div class="overflow-x-auto max-h-72 border border-gray-700 rounded-lg">
                        <table class="min-w-full text-xs">
                            <thead class="bg-gray-800 text-gray-200">
                                <tr>
                                    <th class="px-2 py-1 border-b border-gray-700">MateriaId</th>
                                    <th class="px-2 py-1 border-b border-gray-700">Tipo</th>
                                    <th class="px-2 py-1 border-b border-gray-700">Trimestre</th>
                                    <th class="px-2 py-1 border-b border-gray-700">Valor</th>
                                    <th class="px-2 py-1 border-b border-gray-700">Fecha</th>
                                </tr>
                            </thead>
                            <tbody id="tabla-notas" class="bg-gray-900/40">
                                <!-- JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

        </main>
    </div>

</body>
</html>
